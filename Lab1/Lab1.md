# 2025秋季学期-数据结构 Lab1

> 负责助教：于海涛



## Lab说明

- 请使用**C++或Java**完成本课程的Lab编写（如果使用Python等其他语言，在批阅时会酌情扣分）。
- 由于**本课程的Lab将以测试用例的通过情况作为最终评分的主要依据**，因此请预先注册洛谷（https://www.luogu.com.cn）账号，用户名统一命名为**姓名的小写字母缩写\_学号**，**例如张三同学的用户名为zs_1234567890**。用户名只有一次修改机会，若本步骤出错请更换其他邮箱重新注册账号。
- **Lab提交**：
  1. 将代码打包成**.zip压缩包**，命名格式为**学号\_姓名\_Lab1.zip**，上传至elearning平台
  2. 通过本次Lab的洛谷链接加入比赛，提交并运行每道题，**请确保你已经在洛谷平台上使用测试用例进行过评分**。
  3. 准确完成上述两项内容后，本次Lab计为有效。
- **Lab评分**主要包含三个维度，请注意：
  1. 洛谷平台对应每道题目的得分（主要评分依据）
  2. 代码关键环节提供**适当的代码注释**
  3. 代码风格是否格式整洁、具有良好可读性
- 切勿抄袭！若检测到代码/注释存在雷同，一经查实，双方均按零分处理。
- **本次Lab截止日期为2025年9月29日23:59**。

> 本次Lab的洛谷链接：https://www.luogu.com.cn/contest/275192
> 邀请码：s8w5



## 题目清单

### 1. 模拟单链表

#### 题目描述

请你实现一个单向链表类，并利用该类完成对链表的操作。

链表初始时只有一个节点，节点值为 `1`，如果你使用的是C++语言，请注意处理好相应的构造函数和析构函数。

链表中的每个节点**至少**需要包含：

- 数据域：存储一个正整数

  > 特殊说明：在本题场景下，数据域存储的整数类似于节点的唯一ID，就像你的学号一样，不同节点的ID不会发生重复，因此你并不需要将问题过于复杂化，相应地输入数据也不会出现ID重复的情况导致你需要设置额外的逻辑条件等来处理这种异常。

- 指针域：指向下一个节点的指针

你需要在链表类中**至少**实现以下成员函数：

1. **返回头节点**：获取单链表的第一个节点
2. **返回下一个节点**：给定某个节点，返回其下一个后继节点
3. **插入节点**：在指定值为 `x` 的节点后插入一个新节点 `y`
4. **删除节点**：删除值为 `x` 的节点
5. **修改节点**：将指定值为 `x` 的节点的数据修改为 `y`
6. **查询节点对应数值**：给定某个值 `x`，输出**它的后继节点的值**
7. **顺序打印全部节点**：从头节点开始，依次输出链表中的所有节点值，节点之间用一个空格分隔，最后一个数后不加空格，输出完换行。

#### 输入格式

第一行一个整数 `q`，表示操作次数。

接下来 `q` 行，每行表示一次操作，格式如下：

- `1 x y` ：在节点 `x` 后插入新节点 `y`（若不存在则忽略）
- `2 x` ：查询节点 `x` 的后继（如果不存在则输出 `0`）
- `3 x` ：删除值为 `x` 的节点（若不存在则忽略）
- `4 x y` ：将节点 `x` 的值修改为 `y`（若不存在则忽略）
- `5` ：顺序输出当前链表中的所有节点

#### 输出格式

- 对于每个操作 `2`，输出一个整数，表示查询结果。
- 对于每个操作 `5`，顺序输出链表中的所有节点值，节点之间用一个空格分隔。
- 每个答案占一行。

#### 输入输出样例

##### 输入 #1

```
6
1 1 2
1 2 3
2 1
5
3 2
5
```

##### 输出 #1

```
2
1 2 3
1 3
```

##### 输入 #2

```
7
1 1 1000000000
1 1000000000 4294967295
5
2 1000000000
4 4294967295 42
5
2 4294967295
```

##### 输出 #2

```
1 1000000000 4294967295
4294967295
1 1000000000 42
0
```

#### 数据说明

操作次数 $1 \leq q \leq 100$

节点存储的整数 ID 满足 $1 \leq ID \leq 2^{32}-1$

输入会保证所有插入的节点 ID 互不相同，不会出现重复情况；此外，输入还会保证初始节点永远不被删除，这样排除了链表为空时带来的异常。

#### Hint

- 更高阶的操作可以使用基础操作的接口，进而使代码更加简洁，这在设计链表过程中也不例外。
- 编程中数据类型的选择往往需要根据数据范围来相应变动。



### 2. 约瑟夫问题

#### 题目描述

约瑟夫问题是一个经典的链表应用问题：
有 $n$ 个人（编号为 $1, 2, \dots, n$）围成一个圆圈，从第 $1$ 个人开始报数，每次数到 $k$ 的人出列。出列后，从下一个人开始继续从 $1$ 报数，如此循环，直到最后只剩下一个人即为获胜者。

请你根据上一题中的单链表进行适当修改，从而实现一个**循环单链表**来模拟上述过程，并输出最终的获胜者。

> 特殊说明：无需保证循环单链表类的完备性，也就是说，你可以不实现你认为的与解决本题无关的类内成员函数（例如上一题中的操作 `5`），这对最终分数并没有影响。

#### 输入格式

两个整数，总人数 $n$ 和报数的步长 $k$ ，二者之间用空格分隔。

#### 输出格式

最终的获胜者编号$win\_id$

#### 输入输出样例

##### 输入 #1

```
7 3
```

##### 输出 #1

```
4
```

##### 输入 #2

```
10 4
```

##### 输出 #2

```
5
```

##### 输入 #3

```
1 1
```

##### 输出 #3

```
1
```

#### 数据说明

$1 \leq n \leq 10^3$

$1 \leq k \leq n$

$1 \leq win\_id \leq n$

#### Hint

- 循环链表相比单链表在设计上有什么不同，这些不同是否会导致构造函数以及链表的基础操作的实现也有区别？
- 在本题的场景下，相比维护一个数据来实时监控链表长度，是否还有更简便的方法来判断游戏是否结束（即当前链表长度是否为1）？

